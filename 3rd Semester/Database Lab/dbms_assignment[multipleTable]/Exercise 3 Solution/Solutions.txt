CREATE TABLE Planet 
(
  
PlanetID INTEGER PRIMARY KEY,
  
Name VARCHAR(255) NOT NULL,
  
Coordinates REAL NOT NULL

); 




CREATE TABLE Client 
(
  
AccountNumber INTEGER PRIMARY KEY,
  
Name VARCHAR(255) NOT NULL

);

CREATE TABLE Employee 
(
  
EmployeeID INTEGER PRIMARY KEY,
  
Name VARCHAR(255) NOT NULL,
  
Position VARCHAR(255) NOT NULL,
  
Salary REAL NOT NULL,
  
Remarks VARCHAR(255)

);



CREATE TABLE Shipment 
(
  
ShipmentID INTEGER PRIMARY KEY,
  
SDate DATE,
  
Manager INTEGER NOT NULL,
  
Planet INTEGER NOT NULL,
  
FOREIGN KEY (Manager) REFERENCES Employee(EmployeeID),
  
FOREIGN KEY (Planet) REFERENCES Planet(PlanetID)

);


CREATE TABLE Has_Clearance 
(
  
Employee INTEGER NOT NULL,
  
Planet INTEGER NOT NULL,
  
BLevel INTEGER NOT NULL,
  
PRIMARY KEY(Employee, Planet),
  
FOREIGN KEY (Employee) REFERENCES Employee(EmployeeID),
  
FOREIGN KEY (Planet) REFERENCES Planet(PlanetID)

);

CREATE TABLE Package 
(
  
Shipment INTEGER NOT NULL,
  
PackageNumber INTEGER NOT NULL,
  
Contents VARCHAR(255) NOT NULL,
  
Weight REAL NOT NULL,
  
Sender INTEGER NOT NULL,
  
Recipient INTEGER NOT NULL,
  
PRIMARY KEY(Shipment, PackageNumber),
  
FOREIGN KEY (Shipment) REFERENCES Shipment(ShipmentID),
  
FOREIGN KEY (Sender) REFERENCES Client(AccountNumber),
  
FOREIGN KEY (Recipient) REFERENCES Client(AccountNumber)

);

// 3.1
SELECT Client.Name
FROM Client, Package
WHERE Client.AccountNumber = Package.Recipient AND Package.Weight = 1.5;

// 3.2
SELECT SUM(Package.Weight)
FROM Package, Client
WHERE Client.AccountNumber = Package.Recipient AND Client.Name = 'Al Gore''s Head';

// 3.3
SELECT Employee.Name
FROM
(
	SELECT Shipment.Manager
	FROM 
	(
		SELECT Package.Shipment
		FROM Package, Client
		WHERE Client.AccountNumber = Package.Recipient AND Client.Name = 'Al Gore''s Head'
	) PackSent, Shipment
	WHERE PackSent.Shipment = Shipment.ShipmentID
) Pilot, Employee
WHERE Pilot.Manager = Employee.EmployeeID;